<!DOCTYPE html>
<html lang="en">
  <head>
    
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bonkhouse</title>
    <meta name="description" content="Bonkhouse lane shooter starring Bonkhouse." />

    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://bonkhouse.netlify.app/" />
    <meta property="og:title" content="Bonkhouse" />
    <meta property="og:description" content="Bonkhouse lane shooter starring Bonkhouse." />
    <meta property="og:image" content="https://bonkhouse.netlify.app/og-1200x630.png" />

    <!-- Twitter / X -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Bonkhouse" />
    <meta name="twitter:description" content="Bonkhouse lane shooter starring Bonkhouse." />
    <meta name="twitter:image" content="https://bonkhouse.netlify.app/og-1200x630.png" />

    <!-- Farcaster Mini App hint -->
    <meta property="fc:frame" content="vNext" />

    <!-- Favicon -->
    <link rel="icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32.png" />
    <link rel="icon" type="image/png" sizes="48x48" href="/favicon-48.png" />
    <link rel="icon" type="image/png" href="/favicon.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <script type="importmap">
      {
        "imports": {
          "three": "https://esm.sh/three@0.160.0",
          "three/": "https://esm.sh/three@0.160.0/",
          "tone": "https://esm.sh/tone@14.7.77"
        }
      }
    </script>
    <style>
      html, body { margin: 0; padding: 0; background-color: #1a1a2e; }
      #ui {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        font-family: 'Orbitron', sans-serif;
        color: white;
      }
      #topLeft {
        position: absolute;
        top: 20px;
        left: 20px;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
      }
      #playerHealthBar {
        width: 150px;
        height: 20px;
        background: rgba(0,0,0,0.5);
        border: 2px solid white;
        border-radius: 10px;
        overflow: hidden;
        margin-top: 5px;
      }
      #playerHealthFill {
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, #2ecc71, #27ae60);
        transition: width 0.3s;
      }
      #topRight {
        position: absolute;
        top: 20px;
        right: 20px;
        text-align: right;
        font-size: 24px;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        gap: 8px;
      }
      #playerIdentity {
        font-size: 16px;
        color: #FFD700;
        margin-bottom: 6px;
      }
      .tip-btn {
        font-size: 14px;
        padding: 8px 14px;
        background: linear-gradient(90deg, #FFA500, #FFD700);
        color: #2C3E50;
        border-color: #FFD700;
      }
      .tip-btn:hover {
        background: linear-gradient(90deg, #FF8C00, #FFC400);
      }
      #coins {
        color: #f1c40f;
        font-weight: bold;
      }
      #topCenter {
        position: absolute;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        text-align: center;
        font-size: 28px;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        font-weight: bold;
      }
      #debugInfo {
        position: absolute;
        bottom: 80px;
        left: 20px;
        font-size: 12px;
        font-family: monospace;
        background: rgba(0,0,0,0.7);
        padding: 10px;
        border-radius: 5px;
        display: none;
      }
      #debugInfo.show {
        display: block;
      }
      #waveBanner {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) translateX(-150%);
        opacity: 0;
        background: linear-gradient(90deg, rgba(255,165,0,0.95), rgba(255,215,0,0.95));
        padding: 20px 50px;
        border-radius: 10px;
        border: 3px solid #FFD700;
        font-size: 32px;
        font-weight: bold;
        color: #2C3E50;
        text-shadow: 1px 1px 2px rgba(255,255,255,0.5);
        transition: transform 0.5s ease-in-out, opacity 0.3s ease-in-out;
        z-index: 1000;
      }
      #waveBanner.show {
        transform: translate(-50%, -50%) translateX(0);
        opacity: 1;
      }
      #loadingScreen {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: url('./assets/Bonkscreen.png');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-end;
        padding-bottom: 10%;
        z-index: 10000;
        transition: opacity 0.5s;
      }
      #loadingScreen.hidden {
        opacity: 0;
        pointer-events: none;
      }
      #loadingTitle {
        font-size: 56px;
        font-weight: bold;
        color: #FFD700;
        margin-bottom: 30px;
        text-shadow: 3px 3px 6px rgba(0,0,0,0.8);
        background: rgba(0, 0, 0, 0.6);
        padding: 20px 40px;
        border-radius: 15px;
      }
      #loadingCharacter {
        display: none;
      }
      @keyframes bonkhouseBounce {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-20px); }
      }
      #loadingBar {
        width: 300px;
        height: 30px;
        background: rgba(0,0,0,0.7);
        border: 3px solid #FFD700;
        border-radius: 15px;
        overflow: hidden;
        margin-top: 20px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
      }
      #loadingBarFill {
        width: 0%;
        height: 100%;
        background: linear-gradient(90deg, #FFA500, #FFD700);
        transition: width 0.3s;
      }
      #loadingPercent {
        margin-top: 10px;
        font-size: 20px;
        color: #FFD700;
        font-weight: bold;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        background: rgba(0, 0, 0, 0.5);
        padding: 8px 20px;
        border-radius: 10px;
      }
      #loadingTip {
        margin-top: 20px;
        font-size: 18px;
        color: #ffffff;
        text-align: center;
        max-width: 400px;
        font-style: italic;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        background: rgba(0, 0, 0, 0.5);
        padding: 12px 24px;
        border-radius: 10px;
      }
      #mainMenu {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: url('https://rosebud.ai/assets/bonkhouse-title-screen-landscape.png.webp?kCYg');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        display: none;
        flex-direction: column;
        align-items: flex-end;
        justify-content: center;
        z-index: 9000;
        padding-right: 10%;
      }
      #mainMenu.show {
        display: flex;
      }
      .menu-content-panel {
        background: rgba(0, 0, 0, 0.75);
        backdrop-filter: blur(10px);
        padding: 50px 60px;
        border-radius: 20px;
        border: 3px solid rgba(255, 215, 0, 0.5);
        box-shadow: 0 10px 50px rgba(0, 0, 0, 0.5);
        max-width: 500px;
        text-align: center;
      }
      
      @media (max-width: 768px) {
        #mainMenu {
          align-items: center;
          padding-right: 0;
        }
        .menu-content-panel {
          padding: 30px 40px;
          max-width: 90%;
        }
        #menuTitle {
          font-size: 48px;
        }
        #menuSubtitle {
          font-size: 20px;
          margin-bottom: 40px;
        }
        #menuCharacter {
          font-size: 80px;
          margin: 15px 0 30px 0;
        }
        .menu-btn {
          font-size: 24px;
          padding: 15px 40px;
        }
        .menu-btn.secondary {
          font-size: 18px;
          padding: 12px 30px;
        }
      }
      #menuTitle {
        font-size: 64px;
        font-weight: bold;
        color: #FFD700;
        margin-bottom: 20px;
        text-shadow: 4px 4px 8px rgba(0,0,0,0.8);
      }
      #menuSubtitle {
        font-size: 24px;
        color: #FFA500;
        margin-bottom: 60px;
      }
      #menuCharacter {
        font-size: 100px;
        margin: 20px 0 40px 0;
      }
      #menuUserRow {
        font-size: 18px;
        color: #ffffff;
        margin-bottom: 20px;
      }
      #menuUserName {
        color: #FFD700;
        font-weight: bold;
      }
      .menu-btn {
        padding: 20px 60px;
        font-size: 28px;
        font-family: 'Orbitron', sans-serif;
        background: linear-gradient(90deg, #FFA500, #FFD700);
        color: #2C3E50;
        border: 3px solid #FFD700;
        border-radius: 10px;
        cursor: pointer;
        pointer-events: auto;
        margin: 10px;
        font-weight: bold;
        text-shadow: 1px 1px 2px rgba(255,255,255,0.5);
        transition: transform 0.2s, box-shadow 0.2s;
      }
      .menu-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 0 20px rgba(255,215,0,0.6);
      }
      .menu-btn:active {
        transform: scale(0.98);
      }
      .menu-btn.secondary {
        background: rgba(74, 144, 226, 0.8);
        color: white;
        border-color: #4a90e2;
        font-size: 20px;
        padding: 15px 40px;
      }
      #upgradesMenu {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(0,0,0,0.95);
        padding: 30px 40px;
        border-radius: 15px;
        border: 3px solid #FFD700;
        display: none;
        max-width: 500px;
        width: 90%;
        max-height: 80vh;
        overflow-y: auto;
        z-index: 8000;
      }
      #upgradesMenu.show {
        display: block;
      }
      #upgradesMenu h2 {
        font-size: 36px;
        color: #FFD700;
        margin: 0 0 10px 0;
        text-align: center;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
      }
      #upgradesCoins {
        text-align: center;
        font-size: 24px;
        color: #FFA500;
        margin-bottom: 20px;
      }
      .upgrade-item {
        background: rgba(255,255,255,0.05);
        border: 2px solid #4a90e2;
        border-radius: 10px;
        padding: 15px;
        margin-bottom: 15px;
        transition: all 0.3s;
      }
      .upgrade-item:hover {
        background: rgba(255,255,255,0.1);
        border-color: #FFD700;
      }
      .upgrade-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
      }
      .upgrade-name {
        font-size: 20px;
        font-weight: bold;
        color: #FFD700;
      }
      .upgrade-level {
        font-size: 16px;
        color: #4a90e2;
        background: rgba(74,144,226,0.2);
        padding: 3px 10px;
        border-radius: 5px;
      }
      .upgrade-description {
        font-size: 14px;
        color: #B0BEC5;
        margin-bottom: 10px;
      }
      .upgrade-stats {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
      }
      .upgrade-bonus {
        font-size: 14px;
        color: #2ecc71;
      }
      .upgrade-next {
        font-size: 14px;
        color: #FFA500;
      }
      .upgrade-btn {
        width: 100%;
        padding: 12px;
        font-size: 18px;
        font-family: 'Orbitron', sans-serif;
        background: linear-gradient(90deg, #2ecc71, #27ae60);
        color: white;
        border: 2px solid #2ecc71;
        border-radius: 8px;
        cursor: pointer;
        font-weight: bold;
        transition: all 0.3s;
      }
      .upgrade-btn:hover {
        background: linear-gradient(90deg, #27ae60, #229954);
        transform: scale(1.02);
        box-shadow: 0 0 15px rgba(46,204,113,0.5);
      }
      .upgrade-btn:active {
        transform: scale(0.98);
      }
      .upgrade-btn:disabled {
        background: rgba(100,100,100,0.5);
        border-color: #555;
        color: #888;
        cursor: not-allowed;
        transform: none;
      }
      .upgrade-btn:disabled:hover {
        transform: none;
        box-shadow: none;
      }
      .upgrade-btn.max-level {
        background: linear-gradient(90deg, #FFD700, #FFA500);
        border-color: #FFD700;
        color: #2C3E50;
      }
      #closeUpgradesBtn {
        margin-top: 20px;
        width: 100%;
        padding: 15px;
        font-size: 20px;
        font-family: 'Orbitron', sans-serif;
        background: linear-gradient(90deg, #FFA500, #FFD700);
        color: #2C3E50;
        border: 3px solid #FFD700;
        border-radius: 10px;
        cursor: pointer;
        font-weight: bold;
        transition: all 0.3s;
      }
      #closeUpgradesBtn:hover {
        transform: scale(1.05);
        box-shadow: 0 0 20px rgba(255,215,0,0.6);
      }
      #bottomRight {
        position: absolute;
        bottom: 30px;
        right: 20px;
      }
      #mobileControls {
        position: absolute;
        left: 20px;
        right: 20px;
        bottom: 20px;
        display: none;
        justify-content: space-between;
        align-items: flex-end;
        pointer-events: none;
        z-index: 1200;
        padding-bottom: env(safe-area-inset-bottom);
      }
      #mobileControls .control-group {
        display: flex;
        gap: 12px;
        pointer-events: auto;
      }
      #mobileControls .fire-group {
        margin-bottom: 90px;
      }
      .mobile-btn {
        width: 64px;
        height: 64px;
        padding: 0;
        font-size: 24px;
        border-radius: 14px;
        background: rgba(0, 0, 0, 0.45);
        border: 2px solid rgba(255, 255, 255, 0.7);
        touch-action: none;
        user-select: none;
      }
      .mobile-btn.fire {
        width: 78px;
        height: 78px;
        font-size: 22px;
        background: rgba(231, 76, 60, 0.85);
        border-color: rgba(255, 255, 255, 0.9);
      }
      @media (hover: none) and (pointer: coarse) {
        #mobileControls {
          display: flex;
        }
      }
      .btn {
        padding: 12px 24px;
        font-size: 18px;
        font-family: 'Orbitron', sans-serif;
        background: rgba(74, 144, 226, 0.9);
        color: white;
        border: 2px solid white;
        border-radius: 8px;
        cursor: pointer;
        pointer-events: auto;
        margin: 5px;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
      }
      .btn:hover {
        background: rgba(53, 122, 189, 0.9);
      }
      .btn:active {
        transform: scale(0.95);
      }
      #startWaveBtn {
        position: absolute;
        bottom: 50%;
        left: 50%;
        transform: translate(-50%, 50%);
        padding: 20px 50px;
        font-size: 28px;
        display: none;
      }
      #startWaveBtn.show {
        display: block;
      }
      #gameOver {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        display: none;
        background: rgba(0,0,0,0.95);
        padding: 40px 60px;
        border-radius: 15px;
        border: 3px solid #e74c3c;
      }
      #gameOver.show {
        display: block;
      }
      #gameOver h1 {
        font-size: 56px;
        margin: 0 0 20px 0;
        color: #e74c3c;
        text-shadow: 3px 3px 6px rgba(0,0,0,0.8);
      }
      #gameOver p {
        font-size: 24px;
        margin: 10px 0;
      }
      #pauseMenu {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        display: none;
        background: rgba(0,0,0,0.95);
        padding: 40px 60px;
        border-radius: 15px;
        border: 3px solid #4a90e2;
      }
      #pauseMenu.show {
        display: block;
      }
      #pauseMenu h2 {
        font-size: 48px;
        margin: 0 0 30px 0;
        color: #4a90e2;
      }
      .icon-btn {
        width: 50px;
        height: 50px;
        font-size: 24px;
        padding: 8px;
      }
      #musicBtn {
        animation: musicPulse 2s ease-in-out infinite;
      }
      @keyframes musicPulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.1); }
      }
      #settingsMenu, #leaderboardMenu {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: url('https://rosebud.ai/assets/bonkhouse-title-screen-landscape.png.webp?kCYg');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 9500;
      }
      .difficulty-btn {
        width: 100%;
        padding: 20px;
        font-size: 18px;
        font-family: 'Orbitron', sans-serif;
        background: rgba(74, 144, 226, 0.3);
        color: white;
        border: 3px solid #4a90e2;
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.3s;
      }
      .difficulty-btn:hover {
        background: rgba(74, 144, 226, 0.5);
        transform: scale(1.02);
      }
      .difficulty-btn.active {
        background: linear-gradient(90deg, #FFA500, #FFD700);
        color: #2C3E50;
        border-color: #FFD700;
        box-shadow: 0 0 20px rgba(255,215,0,0.6);
      }
      .leaderboard-entry {
        background: rgba(255,255,255,0.05);
        border: 2px solid #4a90e2;
        border-radius: 10px;
        padding: 15px 20px;
        margin-bottom: 10px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: all 0.3s;
      }
      .leaderboard-entry:hover {
        background: rgba(255,255,255,0.1);
        border-color: #FFD700;
      }
      .leaderboard-entry.top3 {
        border-color: #FFD700;
        background: rgba(255,215,0,0.1);
      }
      .leaderboard-rank {
        font-size: 28px;
        font-weight: bold;
        color: #FFD700;
        min-width: 50px;
      }
      .leaderboard-name {
        font-size: 20px;
        color: white;
        flex: 1;
        text-align: left;
        padding: 0 20px;
      }
      .leaderboard-score {
        font-size: 20px;
        color: #2ecc71;
        font-weight: bold;
      }
      .leaderboard-time {
        font-size: 16px;
        color: #B0BEC5;
        margin-left: 10px;
      }
      #leaderboardUserRow {
        font-size: 18px;
        color: #ffffff;
        margin-bottom: 20px;
      }
      #leaderboardUserName {
        color: #FFD700;
        font-weight: bold;
      }
      #storeMenu {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: url('https://rosebud.ai/assets/bonkhouse-title-screen-landscape.png.webp?kCYg');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 9500;
      }
      .character-card {
        background: rgba(0, 0, 0, 0.8);
        border: 3px solid #4a90e2;
        border-radius: 15px;
        padding: 20px;
        text-align: center;
        transition: all 0.3s;
        position: relative;
        overflow: hidden;
      }
      .character-card:hover {
        transform: scale(1.05);
        border-color: #FFD700;
        box-shadow: 0 0 20px rgba(255, 215, 0, 0.4);
      }
      .character-card.owned {
        border-color: #2ecc71;
      }
      .character-card.selected {
        border-color: #FFD700;
        background: rgba(255, 215, 0, 0.15);
        box-shadow: 0 0 30px rgba(255, 215, 0, 0.6);
      }
      .character-card.locked {
        opacity: 0.6;
      }
      .character-icon {
        font-size: 80px;
        margin: 10px 0;
        filter: grayscale(100%);
      }
      .character-card.owned .character-icon {
        filter: grayscale(0%);
      }
      .character-card.selected .character-icon {
        filter: grayscale(0%);
        animation: characterBounce 1s ease-in-out infinite;
      }
      @keyframes characterBounce {
        0%, 100% { transform: translateY(0) scale(1); }
        50% { transform: translateY(-10px) scale(1.1); }
      }
      .character-name {
        font-size: 20px;
        font-weight: bold;
        color: #FFD700;
        margin: 10px 0;
      }
      .character-price {
        font-size: 18px;
        color: #f1c40f;
        margin: 10px 0;
      }
      .character-lock {
        position: absolute;
        top: 10px;
        right: 10px;
        font-size: 30px;
        color: #e74c3c;
      }
      .character-check {
        position: absolute;
        top: 10px;
        right: 10px;
        font-size: 30px;
        color: #2ecc71;
      }
      .character-btn {
        width: 100%;
        padding: 10px;
        font-size: 16px;
        font-family: 'Orbitron', sans-serif;
        background: linear-gradient(90deg, #2ecc71, #27ae60);
        color: white;
        border: 2px solid #2ecc71;
        border-radius: 8px;
        cursor: pointer;
        font-weight: bold;
        transition: all 0.3s;
        margin-top: 10px;
      }
      .character-btn:hover:not(:disabled) {
        background: linear-gradient(90deg, #27ae60, #229954);
        transform: scale(1.05);
      }
      .character-btn:disabled {
        background: rgba(100, 100, 100, 0.5);
        border-color: #555;
        color: #888;
        cursor: not-allowed;
      }
      .character-btn.select-btn {
        background: linear-gradient(90deg, #FFA500, #FFD700);
        border-color: #FFD700;
        color: #2C3E50;
      }
      .character-btn.selected-btn {
        background: rgba(46, 204, 113, 0.3);
        border-color: #2ecc71;
        color: #2ecc71;
        cursor: default;
      }
      .store-tab-btn {
        padding: 12px 30px;
        font-size: 18px;
        font-family: 'Orbitron', sans-serif;
        background: rgba(74, 144, 226, 0.3);
        color: white;
        border: 2px solid #4a90e2;
        border-radius: 8px;
        cursor: pointer;
        font-weight: bold;
        transition: all 0.3s;
      }
      .store-tab-btn:hover {
        background: rgba(74, 144, 226, 0.5);
        transform: scale(1.05);
      }
      .store-tab-btn.active {
        background: linear-gradient(90deg, #FFA500, #FFD700);
        color: #2C3E50;
        border-color: #FFD700;
        box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
      }
      .coin-package-card {
        background: linear-gradient(135deg, rgba(41, 128, 185, 0.2), rgba(142, 68, 173, 0.2));
        border: 3px solid #3498db;
        border-radius: 15px;
        padding: 25px;
        text-align: center;
        transition: all 0.3s;
        position: relative;
        overflow: hidden;
      }
      .coin-package-card:hover {
        transform: scale(1.05);
        border-color: #FFD700;
        box-shadow: 0 0 25px rgba(52, 152, 219, 0.6);
      }
      .coin-package-card.popular {
        border-color: #FFD700;
        background: linear-gradient(135deg, rgba(255, 165, 0, 0.2), rgba(255, 215, 0, 0.2));
      }
      .coin-package-card.popular::before {
        content: '‚≠ê POPULAR';
        position: absolute;
        top: 10px;
        right: -30px;
        background: linear-gradient(90deg, #FFD700, #FFA500);
        color: #2C3E50;
        padding: 5px 40px;
        font-size: 12px;
        font-weight: bold;
        transform: rotate(45deg);
        box-shadow: 0 2px 5px rgba(0,0,0,0.3);
      }
      .coin-package-icon {
        font-size: 80px;
        margin: 15px 0;
        animation: coinFloat 3s ease-in-out infinite;
      }
      @keyframes coinFloat {
        0%, 100% { transform: translateY(0) rotate(0deg); }
        50% { transform: translateY(-15px) rotate(180deg); }
      }
      .coin-package-amount {
        font-size: 32px;
        font-weight: bold;
        color: #f1c40f;
        margin: 15px 0;
      }
      .coin-package-price {
        font-size: 24px;
        color: #2ecc71;
        margin: 15px 0;
        font-weight: bold;
      }
      .coin-package-bonus {
        font-size: 14px;
        color: #e74c3c;
        background: rgba(231, 76, 60, 0.2);
        padding: 5px 10px;
        border-radius: 5px;
        margin: 10px 0;
        font-weight: bold;
      }
      .buy-coins-btn {
        width: 100%;
        padding: 15px;
        font-size: 18px;
        font-family: 'Orbitron', sans-serif;
        background: linear-gradient(90deg, #2ecc71, #27ae60);
        color: white;
        border: 3px solid #2ecc71;
        border-radius: 10px;
        cursor: pointer;
        font-weight: bold;
        transition: all 0.3s;
        margin-top: 15px;
      }
      .buy-coins-btn:hover {
        background: linear-gradient(90deg, #27ae60, #229954);
        transform: scale(1.05);
        box-shadow: 0 0 20px rgba(46, 204, 113, 0.6);
      }
      .buy-coins-btn:active {
        transform: scale(0.98);
      }
    </style>
  </head>
  <body>
    <div id="loadingScreen">
      <div id="loadingTitle">BONKHOUSE</div>
      <div id="loadingCharacter">üè†üêï</div>
      <div id="loadingBar">
        <div id="loadingBarFill"></div>
      </div>
      <div id="loadingPercent">Loading... 0%</div>
      <div id="loadingTip">Bonkhouse never retreats.</div>
    </div>
    
    <div id="mainMenu">
      <div class="menu-content-panel">
        <div id="menuTitle">BONKHOUSE</div>
        <div id="menuSubtitle">Defend the Lane</div>
        <div id="menuUserRow">PLAYER: <span id="menuUserName">Player</span></div>
        <button id="playBtn" class="menu-btn">PLAY</button>
        <button id="storeBtn" class="menu-btn secondary">STORE</button>
        <button id="leaderboardBtn" class="menu-btn secondary">LEADERBOARD</button>
        <button id="settingsBtn" class="menu-btn secondary">SETTINGS</button>
        <button id="menuTipBtn" class="menu-btn secondary">TIP USDC</button>
      </div>
    </div>
    
    <div id="settingsMenu" style="display: none;">
      <div class="menu-content-panel">
        <h2 style="font-size: 48px; color: #FFD700; margin-bottom: 30px;">SETTINGS</h2>
        
        <div style="margin-bottom: 30px;">
          <label style="display: block; font-size: 20px; color: #FFA500; margin-bottom: 10px;">Player Name:</label>
          <input type="text" id="playerNameInput" maxlength="20" placeholder="Enter your name" 
                 style="width: 100%; padding: 15px; font-size: 18px; font-family: 'Orbitron', sans-serif; 
                 background: rgba(255,255,255,0.1); color: white; border: 2px solid #4a90e2; 
                 border-radius: 8px; text-align: center;" />
        </div>
        
        <div style="margin-bottom: 30px;">
          <label style="display: block; font-size: 20px; color: #FFA500; margin-bottom: 15px;">Difficulty:</label>
          <div style="display: flex; flex-direction: column; gap: 10px;">
            <button class="difficulty-btn" data-difficulty="easy">
              <span style="font-size: 24px; font-weight: bold;">EASY</span>
              <span style="font-size: 14px; display: block; margin-top: 5px;">Enemies move slower</span>
            </button>
            <button class="difficulty-btn active" data-difficulty="medium">
              <span style="font-size: 24px; font-weight: bold;">MEDIUM</span>
              <span style="font-size: 14px; display: block; margin-top: 5px;">Normal speed</span>
            </button>
            <button class="difficulty-btn" data-difficulty="hard">
              <span style="font-size: 24px; font-weight: bold;">HARD</span>
              <span style="font-size: 14px; display: block; margin-top: 5px;">Enemies move faster</span>
            </button>
          </div>
        </div>
        
        <button id="saveSettingsBtn" class="menu-btn">SAVE</button>
        <button id="backFromSettingsBtn" class="menu-btn secondary">BACK</button>
      </div>
    </div>
    
    <div id="leaderboardMenu" style="display: none;">
      <div class="menu-content-panel" style="max-width: 600px;">
        <h2 style="font-size: 48px; color: #FFD700; margin-bottom: 30px;">üèÜ LEADERBOARD üèÜ</h2>
        <div id="leaderboardUserRow">SIGNED IN AS: <span id="leaderboardUserName">Player</span></div>
        <div id="leaderboardList" style="max-height: 400px; overflow-y: auto; margin-bottom: 20px;">
          <!-- Leaderboard entries will be populated here -->
        </div>
        <button id="backFromLeaderboardBtn" class="menu-btn secondary">BACK</button>
      </div>
    </div>
    
    <div id="storeMenu" style="display: none;">
      <div class="menu-content-panel" style="max-width: 900px; max-height: 90vh; overflow-y: auto;">
        <h2 style="font-size: 48px; color: #FFD700; margin-bottom: 20px;">üè™ STORE üè™</h2>
        <div style="text-align: center; margin-bottom: 30px;">
          <span style="font-size: 28px; color: #f1c40f; font-weight: bold;">üí∞ <span id="storeCoins">0</span> Coins</span>
        </div>
        
        <!-- Store Tabs -->
        <div style="display: flex; gap: 10px; margin-bottom: 30px; justify-content: center;">
          <button id="charactersTabBtn" class="store-tab-btn active">CHARACTERS</button>
          <button id="coinsTabBtn" class="store-tab-btn">BUY COINS</button>
        </div>
        
        <!-- Characters Tab -->
        <div id="charactersTab">
          <div style="text-align: center; margin-bottom: 20px; font-size: 14px; color: #B0BEC5; font-style: italic;">
            Earn coins by defeating enemies or purchase coin packages!
          </div>
          <div id="characterGrid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; padding: 10px;">
            <!-- Character cards will be populated here -->
          </div>
        </div>
        
        <!-- Coins Tab -->
        <div id="coinsTab" style="display: none;">
          <div style="text-align: center; margin-bottom: 20px; font-size: 14px; color: #B0BEC5; font-style: italic;">
            Purchase coin packages to unlock characters faster!
          </div>
          <div id="coinPackagesGrid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; margin-bottom: 30px; padding: 10px;">
            <!-- Coin packages will be populated here -->
          </div>
          <div style="text-align: center; font-size: 12px; color: #95a5a6; margin-top: 20px; font-style: italic;">
            * This is a demo purchase system. No real money is charged.
          </div>
        </div>
        
        <button id="backFromStoreBtn" class="menu-btn secondary">BACK</button>
      </div>
    </div>
    
    <div id="upgradesMenu">
      <h2>‚ö° UPGRADES ‚ö°</h2>
      <div id="upgradesCoins">üí∞ <span id="upgradesCoinsAmount">0</span> Coins</div>
      <div id="upgradesList"></div>
      <button id="closeUpgradesBtn">CONTINUE</button>
    </div>
    
    <div id="ui">
      <div id="waveBanner">TASK: Eliminate all enemies!</div>
      <div id="topLeft">
        <div id="playerIdentity">PLAYER: <span id="hudUserName">Player</span></div>
        <div>HP: <span id="playerHP">100</span></div>
        <div id="playerHealthBar">
          <div id="playerHealthFill"></div>
        </div>
      </div>
      <div id="topRight">
        <div>üí∞ <span id="coins">0</span></div>
        <button id="tipBtn" class="btn tip-btn">TIP USDC</button>
      </div>
      <div id="topCenter">
        WAVE <span id="wave">1</span>
        <div id="powerUpIndicator" style="display: none; margin-top: 10px; font-size: 18px; color: #FFD700; background: rgba(0,0,0,0.7); padding: 8px 16px; border-radius: 8px;">
          <span id="powerUpName">MACHINE GUN</span>: <span id="powerUpTimer">10</span>s
        </div>
      </div>
      <div id="bottomRight">
        <button id="muteBtn" class="btn icon-btn">üîä</button>
        <button id="musicBtn" class="btn icon-btn">üéµ</button>
        <button id="pauseBtn" class="btn icon-btn">‚è∏</button>
      </div>
      <div id="mobileControls">
        <div class="control-group">
          <button id="moveLeftBtn" class="btn mobile-btn" aria-label="Move left">LEFT</button>
          <button id="moveRightBtn" class="btn mobile-btn" aria-label="Move right">RIGHT</button>
        </div>
        <div class="control-group fire-group">
          <button id="fireBtn" class="btn mobile-btn fire" aria-label="Fire">FIRE</button>
        </div>
      </div>
      <div id="debugInfo">
        <div>Player: <span id="debugPlayerPos">0, 0, 0</span></div>
        <div>Camera: <span id="debugCameraPos">0, 0, 0</span></div>
        <div>Active Enemies: <span id="debugEnemies">0</span></div>
        <div>Active Bullets: <span id="debugBullets">0</span></div>
      </div>
      <button id="startWaveBtn" class="btn show">START WAVE 1</button>
      
      <div id="gameOver">
        <h1>DEFEATED</h1>
        <p>Waves Survived: <span id="finalWave">1</span></p>
        <p>Time Survived: <span id="finalTime">0:00</span></p>
        <p>Coins Earned: <span id="finalCoins">0</span></p>
        <p id="newHighScoreMsg" style="display: none; color: #FFD700; font-size: 28px; font-weight: bold;">üèÜ NEW HIGH SCORE! üèÜ</p>
        <button id="restartBtn" class="btn">RESTART</button>
      </div>
      
      <div id="pauseMenu">
        <h2>PAUSED</h2>
        <button id="resumeBtn" class="btn">RESUME</button>
        <button id="restartFromPauseBtn" class="btn">RESTART</button>
      </div>
    </div>
    <script type="module" src="main.js"></script>
    <script src="https://storage.googleapis.com/rosebud_staticfiles/ChatManager.js"></script>
    <script src="https://storage.googleapis.com/rosebud_staticfiles/ImageGenerator.js"></script>
    <script src="https://storage.googleapis.com/rosebud_staticfiles/ProgressLogger.js"></script>
    <script src="https://storage.googleapis.com/rosebud_staticfiles/OGP.js"></script>
  </body>
</html>
